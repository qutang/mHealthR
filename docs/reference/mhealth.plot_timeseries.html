<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot time series with annotations — mhealth.plot_timeseries • mHealthR</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Plot time series with annotations — mhealth.plot_timeseries" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mHealthR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.8.11</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/mhealth-object.html">mhealth object</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/qutang/mhealthr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot time series with annotations</h1>
    <small class="dont-index">Source: <a href='https://github.com/qutang/mimsunit//blob/master/R/mhealth.plot.R'><code>R/mhealth.plot.R</code></a></small>
    <div class="hidden name"><code>mhealth.plot_timeseries.Rd</code></div>
    </div>

    <div class="ref-description">

    </div>

    <pre class="usage"><span class='fu'>mhealth.plot_timeseries</span>(<span class='no'>dfs</span>, <span class='no'>file_types</span>, <span class='no'>select_cols</span>, <span class='kw'>group_cols</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>title_cols</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ncols</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>xlabel_timeformat</span> <span class='kw'>=</span> <span class='st'>"%H:%M:%OS"</span>,
  <span class='kw'>nrows</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>as_gg_list</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>text_annotation</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>share_y</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>file_types</th>
      <td><p>vector of file_types for each input dataframes</p></td>
    </tr>
    <tr>
      <th>select_cols</th>
      <td><p>list of selected cols for each input data frames to be plotted.</p></td>
    </tr>
    <tr>
      <th>group_cols</th>
      <td><p>group column names in character vector to divide the plot into subplot. All dataframes should share the same group column names.</p></td>
    </tr>
    <tr>
      <th>title_cols</th>
      <td><p>specify columns that will be put in the title of each plot</p></td>
    </tr>
    <tr>
      <th>ncols</th>
      <td><p>number of columns in the subplot layout per page. Default is 4 columns.</p></td>
    </tr>
    <tr>
      <th>nrows</th>
      <td><p>number of rows in the subplot layout per page. Default is NULL, which will be calculated automatically by `ncols`, so that ncols * nrows &gt;= total number of subplots. But it should not exceed 6 per page.</p></td>
    </tr>
    <tr>
      <th>as_gg_list</th>
      <td><p>if true, return plots as list of ggplot objects; otherwise return gridGrob arranged by ncols and nrows</p></td>
    </tr>
    </table>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Example 1: single accelerometer time series plot</span>
<span class='no'>example1</span> <span class='kw'>=</span> <span class='no'>accelPA</span>[<span class='no'>accelPA</span>$<span class='no'>PID</span> <span class='kw'>==</span> <span class='fl'>8</span> <span class='kw'>&amp;</span> <span class='no'>accelPA</span>$<span class='no'>ACTIVITY</span> <span class='kw'>==</span> <span class='st'>"jumping jacks"</span>,]
<span class='fu'>head</span>(<span class='no'>example1</span>, <span class='fl'>3</span>)</div><div class='output co'>#&gt;     HEADER_TIME_STAMP X_ACCELERATION_METERS_PER_SECOND_SQUARED
#&gt; 1 2015-12-04 16:02:15                                   -2.531
#&gt; 2 2015-12-04 16:02:15                                   -2.438
#&gt; 3 2015-12-04 16:02:15                                   -2.504
#&gt;   Y_ACCELERATION_METERS_PER_SECOND_SQUARED
#&gt; 1                                   -0.793
#&gt; 2                                   -0.777
#&gt; 3                                   -0.758
#&gt;   Z_ACCELERATION_METERS_PER_SECOND_SQUARED      ACTIVITY PID       LOCATION
#&gt; 1                                   -0.305 jumping jacks   8 dominant ankle
#&gt; 2                                    0.281 jumping jacks   8 dominant ankle
#&gt; 3                                    0.078 jumping jacks   8 dominant ankle</div><div class='input'><span class='fu'>mhealth.plot_timeseries</span>(<span class='kw'>dfs</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='no'>example1</span>),
                        <span class='kw'>file_types</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"sensor"</span>),
                        <span class='kw'>select_cols</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span>)),
                        <span class='kw'>group_cols</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"PID"</span>, <span class='st'>"ACTIVITY"</span>, <span class='st'>"LOCATION"</span>),
                        <span class='kw'>as_gg_list</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; <span class='message'>Scale for 'x' is already present. Adding another scale for 'x', which will</span>
#&gt; <span class='message'>replace the existing scale.</span></div><div class='output co'>#&gt; [[1]]</div><div class='img'><img src='mhealth.plot_timeseries-1.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; </div><div class='input'>
<span class='co'># we may also plot only selected axes</span>
<span class='fu'>mhealth.plot_timeseries</span>(<span class='kw'>dfs</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='no'>example1</span>),
                        <span class='kw'>file_types</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"sensor"</span>),
                        <span class='kw'>select_cols</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>3</span>)),
                        <span class='kw'>group_cols</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"PID"</span>, <span class='st'>"ACTIVITY"</span>, <span class='st'>"LOCATION"</span>),
                        <span class='kw'>as_gg_list</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; <span class='message'>Scale for 'x' is already present. Adding another scale for 'x', which will</span>
#&gt; <span class='message'>replace the existing scale.</span></div><div class='output co'>#&gt; [[1]]</div><div class='img'><img src='mhealth.plot_timeseries-2.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; </div><div class='input'>
<span class='co'># Set cols to be used as subtitle</span>
<span class='fu'>mhealth.plot_timeseries</span>(<span class='kw'>dfs</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='no'>example1</span>),
                        <span class='kw'>file_types</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"sensor"</span>),
                        <span class='kw'>select_cols</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span>)),
                        <span class='kw'>title_cols</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"ACTIVITY"</span>, <span class='st'>"LOCATION"</span>),
                        <span class='kw'>group_cols</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"PID"</span>, <span class='st'>"ACTIVITY"</span>, <span class='st'>"LOCATION"</span>),
                        <span class='kw'>as_gg_list</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; <span class='message'>Scale for 'x' is already present. Adding another scale for 'x', which will</span>
#&gt; <span class='message'>replace the existing scale.</span></div><div class='output co'>#&gt; [[1]]</div><div class='img'><img src='mhealth.plot_timeseries-3.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; </div><div class='input'>
<span class='co'># Example 2: multiple accelerometer times series plot</span>
<span class='no'>example2</span> <span class='kw'>=</span> <span class='no'>accelPA</span>[<span class='no'>accelPA</span>$<span class='no'>ACTIVITY</span> <span class='kw'>==</span> <span class='st'>"sitting"</span> <span class='kw'>|</span> <span class='no'>accelPA</span>$<span class='no'>ACTIVITY</span> <span class='kw'>==</span> <span class='st'>"5.5 mph"</span>,]
<span class='fu'>head</span>(<span class='no'>example2</span>, <span class='fl'>3</span>)</div><div class='output co'>#&gt;       HEADER_TIME_STAMP X_ACCELERATION_METERS_PER_SECOND_SQUARED
#&gt; 402 2015-12-04 16:05:14                                   -0.809
#&gt; 403 2015-12-04 16:05:14                                   -0.820
#&gt; 404 2015-12-04 16:05:14                                   -0.816
#&gt;     Y_ACCELERATION_METERS_PER_SECOND_SQUARED
#&gt; 402                                   -0.395
#&gt; 403                                   -0.410
#&gt; 404                                   -0.398
#&gt;     Z_ACCELERATION_METERS_PER_SECOND_SQUARED ACTIVITY PID       LOCATION
#&gt; 402                                   -0.121  sitting   8 dominant ankle
#&gt; 403                                   -0.160  sitting   8 dominant ankle
#&gt; 404                                   -0.211  sitting   8 dominant ankle</div><div class='input'><span class='fu'>mhealth.plot_timeseries</span>(<span class='kw'>dfs</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='no'>example2</span>),
                        <span class='kw'>file_types</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"sensor"</span>),
                        <span class='kw'>select_cols</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span>)),
                        <span class='kw'>group_cols</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"PID"</span>, <span class='st'>"ACTIVITY"</span>, <span class='st'>"LOCATION"</span>),
                        <span class='kw'>as_gg_list</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; <span class='message'>Scale for 'x' is already present. Adding another scale for 'x', which will</span>
#&gt; <span class='message'>replace the existing scale.</span></div><div class='output co'>#&gt; <span class='message'>Scale for 'x' is already present. Adding another scale for 'x', which will</span>
#&gt; <span class='message'>replace the existing scale.</span></div><div class='output co'>#&gt; [[1]]</div><div class='img'><img src='mhealth.plot_timeseries-4.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; [[2]]</div><div class='img'><img src='mhealth.plot_timeseries-5.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; </div><div class='input'>
<span class='co'># Example 3: multiple accelerometer examples on the same plot, note that group cols is set to be ONLY PID, because OTHER cols have different values, if we want to put them on the same plot, they should be have the same group values at least</span>
<span class='no'>example3a</span> <span class='kw'>=</span> <span class='no'>accelPA</span>[<span class='no'>accelPA</span>$<span class='no'>ACTIVITY</span> <span class='kw'>==</span> <span class='st'>"jumping jacks"</span>,]
<span class='no'>example3b</span> <span class='kw'>=</span> <span class='no'>accelPA</span>[<span class='no'>accelPA</span>$<span class='no'>ACTIVITY</span> <span class='kw'>==</span> <span class='st'>"sitting"</span>,]
<span class='fu'>mhealth.plot_timeseries</span>(<span class='kw'>dfs</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='no'>example3a</span>, <span class='no'>example3b</span>),
<span class='kw'>file_types</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"sensor"</span>, <span class='st'>"sensor"</span>),
<span class='kw'>select_cols</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span>), <span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span>)),
<span class='kw'>group_cols</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"PID"</span>),
<span class='kw'>as_gg_list</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; <span class='message'>Scale for 'y' is already present. Adding another scale for 'y', which will</span>
#&gt; <span class='message'>replace the existing scale.</span></div><div class='output co'>#&gt; <span class='message'>Scale for 'x' is already present. Adding another scale for 'x', which will</span>
#&gt; <span class='message'>replace the existing scale.</span></div><div class='output co'>#&gt; [[1]]</div><div class='img'><img src='mhealth.plot_timeseries-6.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
            
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://qutang.github.io'>Qu Tang</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

